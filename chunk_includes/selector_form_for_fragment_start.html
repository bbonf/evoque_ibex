<script>
    // NOTE: Other crucial scripts (for selection) defined in Selector.js controller.

    // Called when clicking a button, to clear highlighting
function clearSelection() {
    document.getElementById("selection_start").value = "";
    document.getElementById("selection_end").value = "";
    document.getElementById("selected_text").value = "";
    document.getElementById("highlighter").innerHTML = document.getElementById("selector").innerHTML;
};


// For showing form fields depending on whether the fragment evokes a question
function toggleQuestionRadio(element) {
    if (( element.id == "q1toggleyes" && !element.checked ) || (element.id == "q1toggleno" && element.checked)) {
        document.getElementById("q1").readOnly = true;
        document.getElementById("q1hiddencopy").innerHTML = document.getElementById("q1").value;
        document.getElementById("q1").value = "";
        document.getElementById("highlighter").style.visibility = "hidden";
        document.getElementById("question4").style.visibility = "hidden";
    } else {
        document.getElementById("q1").readOnly = false;
        document.getElementById("q1").value = document.getElementById("q1hiddencopy").innerHTML;
        document.getElementById("q1hiddencopy").innerHTML = "";
        document.getElementById("highlighter").style.visibility = "visible";
        document.getElementById("question4").style.visibility = "visible";
    }
}

// These are called by the "validator" option, passed on from the experiment definition. I thought they'd fit here.
function qualityControlQuestion(s) {
    if ( document.getElementById("q1toggleyes").checked && s == "" ) return "In item 3, please enter a question or select 'no'.";
    // TODO More sophisticated quality control, e.g., spellcheck, min length, question mark?
    return true;
}

function qualityControlSelection(s) {
    if ( document.getElementById("q1toggleyes").checked && s == "" ) return "For item 4, please highlight a phrase in the fragment.";
    // TODO More sophisticated quality control, e.g., min words, max words?
    return true;
}

</script>

<!--
<center><button onclick="clearSelection()">clear highlighting</button></center> -->


<div style="width: 40em;">

    <p>
        <b>1. How grammatical is this fragment?</b><br>
        <!--<label class="error" for="grammatical"></label><br>-->
        <i>Not grammatical at all.</i>
        <input name="item 1: grammaticality" type="radio" value="1" class="obligatory">1</input>
        <input name="item 1: grammaticality" type="radio" value="2" >2</input>
        <input name="item 1: grammaticality" type="radio" value="3" >3</input>
        <input name="item 1: grammaticality" type="radio" value="4" >4</input>
        <input name="item 1: grammaticality" type="radio" value="5" >5</input>
        <i>Completely grammatical.</i>
    </p>

    <p>
        <b>2. How coherent is this fragment?</b>
        <!--<label class="error" for="coherent"></label>-->
        <br>
        <i>Not coherent at all.</i>
        <input name="item 2: coherence" type="radio" value="1" class="obligatory">1</input>
        <input name="item 2: coherence" type="radio" value="2">2</input>
        <input name="item 2: coherence" type="radio" value="3">3</input>
        <input name="item 2: coherence" type="radio" value="4">4</input>
        <input name="item 2: coherence" type="radio" value="5">5</input>
        <i>Completely coherent.</i>
    </p>

    <p>
        <b>3. Does this fragment evoke a question for you?</b>
        <!--<label class="error" for="question"></label>-->
        <br>
        <!-- (List up to three questions; leave <i>blank</i> if it does not evoke any questions.) <br> -->
        <input name="q1toggle" id="q1toggleyes" type="radio" value="yes" onchange="toggleQuestionRadio(this)" checked="checked"><i>Yes, namely:</i>
        <input name="question" id="q1" type="text" style="width: 33em">
        <input name="q1toggle" id="q1toggleno" type="radio" value="no" onchange="toggleQuestionRadio(this)"><i>No, it doesn't really evoke any question for me.</i>
        <div id="q1hiddencopy" style="display: none"></div>
        <!-- <input name="q2" type="text" style="width: 40em"></input><br>
        <input name="q3" type="text" style="width: 40em"></input><br> -->
    </p>

    <div id="question4"><p>
        <b>4. Which phrase in the fragment primarily evokes this question?</b>
        <!--<label class="error" for="selected_text"></label><br>-->
        <ul>
            <li>Please <mark>highlight</mark> a phrase in the fragment above (cursor selection).</li>
            <li>To change the highlighting just make a new selection.</li>
            <!-- <li>There's also a button to <i>clear</i> the current highlighting.</li>
            <li>If no phrase seems suitable for marking, do not select anything.</li> -->
        </ul>
<!-- below are invisible form fields to which the selection is saved. -->
        <div style="display: none">
        Selected text:
            <input id="selected_text" name="selected_text" type="text" style="width: 32em">
            <textarea id="selection_start" name="selection_start" rows="1" cols="10"></textarea>
            <textarea id="selection_end" name="selection_end" rows="1" cols="10"></textarea>
        </div>
    </p></div>

    <label class="error" for="__ALL_FIELDS__"></label>


</div>